import{s as e,t,u as a,w as l,x as r,y as o,A as i,j as n,h as s,o as u,a as d,B as m,C as p}from"./element-plus-ZpKcekI1.js";import{h as f,o as c,j as v,Q as y,aY as b,aZ as h,k as g,A as x,M as _,O as I,W as T,J as V,u as k,an as L,V as F,U as C,T as w,t as P,z as S,az as z,S as O,K as j,aa as H}from"./lib-RIRnLom_.js";import{_ as W,r as q}from"./index-xe9CM43D.js";const A=[(e=>(b("data-v-a90a9a25"),e=e(),h(),e))((()=>g("path",{d:"M6.432 7.967a.448.448 0 01-.318.133h-.228a.46.46 0 01-.318-.133L2.488 4.85a.305.305 0 010-.43l.427-.43a.293.293 0 01.42 0L6 6.687l2.665-2.699a.299.299 0 01.426 0l.42.431a.305.305 0 010 .43L6.432 7.967z"},null,-1)))],U=W(f({__name:"hamburger",props:{isActive:{type:Boolean,default:!1},type:{type:String,default:"left"}},emits:["toggleClick"],setup(e,{emit:t}){const a=t,l=()=>{a("toggleClick")};return(t,a)=>(c(),v("div",{class:y(["wrap",[e.type,{hidden:!e.isActive}]]),onClick:l},[(c(),v("svg",{class:y([{"is-active":e.isActive},"hamburger"]),width:"1em",height:"1em",viewBox:"0 0 12 12",fill:"currentColor","aria-hidden":"true"},A,2))],2))}}),[["__scopeId","data-v-a90a9a25"]]),D=W(f({__name:"designer-form-layout",setup(l){const r=x(!0),o=x(!0);return(l,i)=>{const n=e,s=t,u=a;return c(),_(u,{class:"designer-form-wrap"},{default:I((()=>[T(n,{width:"250px",class:y(["designer-form-left",{hidden:!k(r)}])},{default:I((()=>[V(l.$slots,"left",{},void 0,!0),T(U,{type:"left","is-active":k(r),onToggleClick:i[0]||(i[0]=e=>r.value=!k(r))},null,8,["is-active"])])),_:3},8,["class"]),T(s,{class:"designer-form-main"},{default:I((()=>[V(l.$slots,"default",{},void 0,!0)])),_:3}),T(n,{width:"300px",class:y(["designer-form-right",{hidden:!k(o)}])},{default:I((()=>[V(l.$slots,"right",{},void 0,!0),T(U,{type:"right","is-active":k(o),onToggleClick:i[1]||(i[1]=e=>o.value=!k(o))},null,8,["is-active"])])),_:3},8,["class"])])),_:3})}}}),[["__scopeId","data-v-9dccdb7e"]]),M=[{dataIndex:"type",title:"类型",isForm:!0,formSlot:"type"},{dataIndex:"title",title:"标题",isForm:!0,valueType:"input"},{dataIndex:"dataIndex",title:"字段标识",isForm:!0,valueType:"input",prop:[{required:!0,trigger:"blur"}]},{dataIndex:"formSort",title:"排序",isForm:!0,valueType:"input-number",attrs:{min:0,step:1,max:999}},{dataIndex:"prop",title:"必填校验",isForm:!0,formSlot:"prop"},{dataIndex:"defaultValue",title:"默认值",isForm:!0,valueType:"input"},{dataIndex:"formLabelHtml",title:"标题（Html）",isForm:!0,formLabelTooltip:"使用 html 渲染 Label",valueType:"input"},{dataIndex:"formLabelTooltip",title:"提示文案",isForm:!0,formLabelTooltip:"在 Label 右上角加上提示文案",valueType:"input"},{dataIndex:"placeholder",title:"占位符",isForm:!0,formLabelTooltip:"自定义 placeholder",valueType:"input"},{dataIndex:"formSpan",title:"栅格布局",isForm:!0,defaultValue:24,formLabelTooltip:"栅格布局",valueType:"input-number",attrs:{min:0,step:1,max:24}},{dataIndex:"formXs",title:"响应式布局-<768px",isForm:!0,formLabelTooltip:"响应式布局-<768px时占据的列数",valueType:"input-number",attrs:{min:0,step:1,max:24}},{dataIndex:"formSm",title:"响应式布局-≥768px",isForm:!0,formLabelTooltip:"响应式布局- ≥768px 时占据的列数",valueType:"input-number",attrs:{min:0,step:1,max:24}},{dataIndex:"formMd",title:"响应式布局-≥768px",isForm:!0,formLabelTooltip:"响应式布局- ≥992px 时占据的列数",valueType:"input-number",attrs:{min:0,step:1,max:24}},{dataIndex:"formLg",title:"响应式布局-≥1200px",isForm:!0,formLabelTooltip:"响应式布局- ≥1200px 时占据的列数",valueType:"input-number",attrs:{min:0,step:1,max:24}},{dataIndex:"formXl",title:"响应式布局-≥1920px",isForm:!0,formLabelTooltip:"响应式布局- ≥1920px 时占据的列数",valueType:"input-number",attrs:{min:0,step:1,max:24}},{dataIndex:"option",title:"选项",isForm:!0,formLabelTooltip:"下拉数据",formSlot:"select-option"},{dataIndex:"attrs",title:"其它属性",isForm:!0,formLabelTooltip:"element-plus 组件属性配置",formSlot:"other-attrs"}],B=[{dataIndex:"formWidth",title:"表单宽度",isForm:!0,valueType:"input",defaultValue:"100%"},{dataIndex:"labelPosition",title:"标签对齐方式",isForm:!0,valueType:"select",defaultValue:"top",option:[{label:"顶部对齐",value:"top"},{label:"左对齐",value:"left"},{label:"右部对齐",value:"right"}]},{dataIndex:"labelWidth",title:"表单标签宽度",isForm:!0,valueType:"input",defaultValue:"150px"},{dataIndex:"attrs",title:"表单属性",isForm:!0,formSlot:"other-attrs",formLabelTooltip:"element-plus form 组件属性配置"}],J=[{title:"单行文本",attrs:{valueType:"input",prop:[{required:!0,trigger:"blur"}]}},{title:"下拉选择框",attrs:{valueType:"select",option:[],prop:[{required:!0,trigger:"change"}]}},{title:"单选框组",attrs:{valueType:"radio",option:[{value:"value",label:"label"}],prop:[{required:!0,trigger:"change"}]}},{title:"多选框组",attrs:{valueType:"checkbox",option:[{value:"value",label:"label"}],prop:[{required:!0,trigger:"change"}]}},{title:"多行文本",attrs:{valueType:"input",prop:[{required:!0,trigger:"blur"}],attrs:{type:"textarea",autosize:{minRows:1}}}},{title:"计数器",attrs:{valueType:"input-number",prop:[{required:!0,trigger:"blur"}],attrs:{min:0,step:1,max:999}}},{title:"开关",attrs:{valueType:"switch",prop:[{required:!0,trigger:"change"}]}},{title:"时间选择器",attrs:{valueType:"date-picker",prop:[{required:!0,trigger:"change"}]}},{title:"树选择器",attrs:{valueType:"tree-select",option:[],prop:[{required:!0,trigger:"change"}]}}],N={class:"content"},R=["data-index"],E=W(f({__name:"designer-form-left",setup(e){function t(e){var t,a;const l=e.target,r=null==(t=null==l?void 0:l.dataset)?void 0:t.index;r&&(null==(a=e.dataTransfer)||a.setData("index",r))}return(e,a)=>{const n=l,s=r,u=o,d=i;return c(),_(d,{type:"border-card",style:{height:"100%"}},{default:I((()=>[T(u,{label:"组件库"},{default:I((()=>[T(s,{"model-value":["base"]},{default:I((()=>[T(n,{title:"基础字段",name:"base"},{default:I((()=>[g("div",N,[(c(!0),v(F,null,L(k(J),((e,a)=>(c(),v("div",{key:a,class:"item"},[g("span",{draggable:"true","data-index":a,onDragstart:t},C(e.title),41,R)])))),128))])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-c6f4c1e5"]]),$={viewBox:"0 0 1024 1024",width:"1em",height:"1em"},X=[g("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1)];const K={name:"ep-plus",render:function(e,t){return c(),v("svg",$,[...X])}},Q={viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Y=[g("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1)];const Z={name:"ep-delete",render:function(e,t){return c(),v("svg",Q,[...Y])}},G={class:"wrap"},ee=W(f({__name:"option-config",props:{options:{type:Array,default:()=>[]}},setup(e){const t=e;function a(){t.options.push({label:"",value:""})}return(l,r)=>{const d=s,m=u,p=Z,f=K,y=n,b=o,h=i;return c(),_(h,{style:{width:"100%"}},{default:I((()=>[T(b,{label:"静态数据"},{default:I((()=>[g("div",G,[(c(!0),v(F,null,L(e.options,((e,a)=>(c(),v("div",{key:a,class:"item"},[T(m,{label:"label：","label-position":"left","label-width":"40px"},{default:I((()=>[T(d,{modelValue:e.label,"onUpdate:modelValue":t=>e.label=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),T(m,{label:"value：","label-position":"left","label-width":"40px",style:{margin:"0 8px"}},{default:I((()=>[T(d,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),T(p,{class:"icon",onClick:e=>function(e){e<0||t.options.splice(e,1)}(a)},null,8,["onClick"])])))),128))]),T(y,{style:{width:"100%",margin:"10px 0"},onClick:a},{default:I((()=>[T(f),w(" 新增 ")])),_:1})])),_:1}),T(b,{label:"动态数据"})])),_:1})}}}),[["__scopeId","data-v-f31f42e4"]]),te=f({inheritAttrs:!1,__name:"json-input",props:{modelValue:{type:Object,default:()=>null}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,l=t,r=x("");function o(e){const t=e.target;if(t.value)try{l("update:modelValue",JSON.parse(t.value))}catch(a){console.error(a),d.error("格式错误！")}else l("update:modelValue",void 0)}return P((()=>a.modelValue),(()=>{try{a.modelValue&&(r.value=JSON.stringify(a.modelValue))}catch(e){console.error(e)}}),{immediate:!0}),(e,t)=>{const a=s;return c(),_(a,{modelValue:k(r),"onUpdate:modelValue":t[0]||(t[0]=e=>S(r)?r.value=e:null),type:"textarea",autosize:{minRows:2},onBlur:o},null,8,["modelValue"])}}}),ae={class:"formWrap"},le={class:"formWrap"},re=W(f({__name:"designer-form-right",props:{currentItem:{type:Object,default:()=>({})},formLayoutParams:{type:Object,default:()=>({})}},emits:["render"],setup(e,{emit:t}){const a=t;function l(e){"formSort"===e.dataIndex&&a("render")}return(t,a)=>{const r=m,n=u,s=z("ProForm"),d=p,f=o,v=i;return c(),_(v,{type:"border-card",style:{height:"100%"}},{default:I((()=>[T(f,{label:"字段属性"},{default:I((()=>[g("div",ae,[e.currentItem&&Object.keys(e.currentItem).length>0?(c(),_(s,{key:e.currentItem.key,"form-param":e.currentItem,"form-list":k(M),"need-rest-params":!1,layout:{formWidth:"100%",labelWidth:"150px"},onSelectChange:l},{type:I((()=>[T(n,{label:"类型"},{default:I((()=>[T(r,{type:"primary"},{default:I((()=>[w(C(e.currentItem.leftComponentTitle),1)])),_:1})])),_:1})])),"select-option":I((()=>[["select","checkbox","tree-select","radio"].includes(e.currentItem.valueType)?(c(),_(n,{key:0,label:"选项"},{default:I((()=>[T(ee,{options:e.currentItem.option},null,8,["options"])])),_:1})):O("",!0)])),prop:I((()=>[T(n,{label:"必填校验"},{default:I((()=>[T(te,{modelValue:e.currentItem.prop,"onUpdate:modelValue":a[0]||(a[0]=t=>e.currentItem.prop=t)},null,8,["modelValue"])])),_:1})])),"other-attrs":I((()=>[T(n,{label:"其它属性"},{default:I((()=>[T(te,{modelValue:e.currentItem.attrs,"onUpdate:modelValue":a[1]||(a[1]=t=>e.currentItem.attrs=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["form-param","form-list"])):(c(),_(d,{key:1,description:"请选择组件"}))])])),_:1}),T(f,{label:"表单属性"},{default:I((()=>[g("div",le,[T(s,{"form-param":e.formLayoutParams,"form-list":k(B),layout:{formWidth:"100%",labelWidth:"150px"}},{"other-attrs":I((()=>[T(n,{label:"表单属性"},{default:I((()=>[T(te,{modelValue:e.formLayoutParams.attrs,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formLayoutParams.attrs=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["form-param","form-list"])])])),_:1})])),_:1})}}}),[["__scopeId","data-v-abba7eb6"]]),oe={viewBox:"0 0 1024 1024",width:"1em",height:"1em"},ie=[g("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64h64z"},null,-1),g("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64z"},null,-1)];const ne={name:"ep-copy-document",render:function(e,t){return c(),v("svg",oe,[...ie])}},se=f({__name:"preview-form",props:{formParam:{type:Object,default:()=>({})},layout:{type:Object,default:()=>({})},formList:{type:Array,default:()=>[]}},setup(e){const t=e,a=x();return a.value={...t.formParam},(t,l)=>{const r=z("ProForm"),o=z("ProDialog");return c(),_(o,{title:"预览",fullscreen:"",class:"no-padding-bottom","no-footer":""},{default:I((()=>[T(r,j({"form-param":k(a),"form-list":e.formList,layout:e.layout},e.layout.attrs),null,16,["form-param","form-list","layout"])])),_:1})}}}),ue={class:"designer-form-editor"},de={class:"header"},me=(e=>(b("data-v-bf3f55d7"),e=e(),h(),e))((()=>g("div",{class:"actions"},null,-1))),pe={class:"tools-btn"},fe={class:"tools-btn"},ce=W(f({__name:"designer-form-editor",props:{formLayoutParams:{type:Object,default:()=>({})}},emits:["select-item"],setup(e,{expose:t,emit:a}){const l=a,r=x([]),o=x({}),i=x(),s=x(),u=x(!1);function d(e){if(e.preventDefault(),e.stopPropagation(),e.dataTransfer){const t=e.dataTransfer.getData("index"),a=J[Number(t)];if(a){const e=JSON.parse(JSON.stringify(a.attrs));i.value={dataIndex:q(),key:q(),title:a.title,leftComponentTitle:a.title,isForm:!0,...e},r.value.push(i.value),l("select-item",i.value)}}}function m(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")}function f(e){i.value=r.value.find((t=>t.dataIndex===e.dataIndex)),l("select-item",i.value)}return t({renderEditorForm:function(){s.value&&s.value.init()}}),(t,a)=>{const y=n,b=ne,h=Z,x=z("ProForm"),V=p;return c(),v("div",ue,[g("div",de,[me,g("div",pe,[T(y,{size:"small",onClick:a[0]||(a[0]=e=>u.value=!0)},{default:I((()=>[w("预览")])),_:1})])]),g("div",{class:"main",onDrop:d,onDragover:m},[k(i)&&Object.keys(k(i)).length>0?(c(),_(x,j({key:0,ref_key:"editorProForm",ref:s,"form-param":k(o),"form-list":k(r),layout:e.formLayoutParams,"is-designer":!0},e.formLayoutParams.attrs,{onRowClick:f}),{"designer-button":I((({item:e})=>[g("div",fe,[T(b,{class:"icon",onClick:H((t=>function(e){const t=JSON.parse(JSON.stringify(e));t.dataIndex=q(),t.key=q(),r.value.push(t),i.value=t,l("select-item",i.value)}(e)),["stop"])},null,8,["onClick"]),T(h,{class:"icon delete",onClick:H((t=>function(e){const t=r.value.findIndex((t=>t.dataIndex===e.dataIndex));t>-1&&(r.value.splice(t,1),i.value=r.value[r.value.length-1],l("select-item",i.value))}(e)),["stop"])},null,8,["onClick"])])])),_:1},16,["form-param","form-list","layout"])):(c(),_(V,{key:1,description:"请从左侧拖拽组件"}))],32),T(se,{modelValue:k(u),"onUpdate:modelValue":a[1]||(a[1]=e=>S(u)?u.value=e:null),"form-param":k(o),"form-list":k(r),layout:e.formLayoutParams,onClose:a[2]||(a[2]=e=>u.value=!1)},null,8,["modelValue","form-param","form-list","layout"])])}}}),[["__scopeId","data-v-bf3f55d7"]]),ve=f({__name:"designer-form",setup(e){const t=x(),a=x(),l=x({formWidth:"100%",labelWidth:"150px",labelPosition:"top",attrs:void 0});function r(e){t.value=e}function o(){a.value&&a.value.renderEditorForm()}return(e,i)=>(c(),_(D,null,{left:I((()=>[T(E)])),right:I((()=>[T(re,{"form-layout-params":k(l),"current-item":k(t),onRender:o},null,8,["form-layout-params","current-item"])])),default:I((()=>[T(ce,{ref_key:"DesignerFormEditorRef",ref:a,"form-layout-params":k(l),onSelectItem:r},null,8,["form-layout-params"])])),_:1}))}});export{ve as default};
